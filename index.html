<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SANTOS & VIEIRA | SYSTEM CORE</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
html,body{
    margin:0;
    width:100%;
    height:100%;
    background:#000;
    font-family:'Orbitron',sans-serif;
    overflow:hidden;
}

/* FUNDO GRID FUTURISTA */
body::before{
    content:"";
    position:fixed;
    inset:0;
    background:
        linear-gradient(rgba(255,0,0,0.05) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,0,0,0.05) 1px, transparent 1px);
    background-size:40px 40px;
    z-index:-1;
}

/* PAINEL PRINCIPAL */
.core-panel{
    width:98%;
    height:96%;
    margin:1% auto;
    border:2px solid #ff0000;
    border-radius:16px;
    box-shadow:0 0 30px #ff0000;
    background:rgba(0,0,0,0.9);
    display:flex;
    flex-direction:column;
}

/* HEADER */
.core-header{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:12px 20px;
    border-bottom:2px solid #ff0000;
    background:linear-gradient(90deg, rgba(255,0,0,0.2), transparent);
}

.core-title{
    color:#ff0000;
    font-size:22px;
    letter-spacing:3px;
    text-shadow:0 0 12px #ff0000;
}

.core-sub{
    color:#fff;
    font-size:10px;
    letter-spacing:2px;
    opacity:0.8;
}

.datetime{
    text-align:right;
    color:#fff;
}

#clock{
    font-size:20px;
    text-shadow:0 0 8px #fff;
}

#date{
    font-size:12px;
    color:#ff0000;
}

/* CONTEÚDO */
.core-body{
    flex:1;
    display:flex;
    gap:14px;
    padding:14px;
    overflow: hidden;
}

/* SIDEBAR */
.sidebar{
    width:240px;
    display:flex;
    flex-direction:column;
    gap:12px;
}

input{
    background:#000;
    border:2px solid #ff0000;
    color:#fff;
    padding:12px;
    font-family: 'Orbitron', sans-serif;
    outline:none;
    box-shadow:0 0 12px rgba(255,0,0,0.4);
}

.btn{
    padding:12px;
    background:#111;
    color:#ff0000;
    border:2px solid #ff0000;
    font-family: 'Orbitron', sans-serif;
    cursor:pointer;
    text-transform:uppercase;
    letter-spacing:1px;
    box-shadow:0 0 15px #ff0000;
    transition:0.3s;
}

.btn:hover{
    background:#ff0000;
    color:#000;
}

.btn-system{
    margin-top:auto;
    font-size:11px;
}

/* CONTAINERS DOS IFRAMES */
.player-box, .chat-box {
    border:2px solid #ff0000;
    border-radius:12px;
    overflow:hidden;
    box-shadow:0 0 20px rgba(255,0,0,0.4);
    background: #000;
    transition: 0.5s; /* Suaviza a transição de tamanho */
}

.player-box { flex: 2; }
.chat-box { flex: 1; }

/* CLASSE PARA YOUTUBE (TELA CHEIA) */
.full-width { flex: 100% !important; }
.hidden { display: none !important; }

iframe {
    width: 100%;
    height: 100%;
    border: none;
    display: block;
}

@media(max-width:900px){
    .core-body{flex-direction:column; overflow-y: auto;}
    .sidebar{width:100%}
    .player-box, .chat-box { min-height: 300px; }
}
</style>
</head>

<body onload="startSystem()">

<div class="core-panel">
    <div class="core-header">
        <div>
            <div class="core-title">SANTOS & VIEIRA</div>
            <div class="core-sub">SYSTEM CORE INTERFACE</div>
        </div>
        <div class="datetime">
            <div id="clock">--:--:--</div>
            <div id="date">--/--/----</div>
        </div>
    </div>

    <div class="core-body">
        <div class="sidebar">
            <input id="linkInput" placeholder="LINK / CANAL">
            <button class="btn" onclick="loadStream('twitch')">TWITCH</button>
            <button class="btn" onclick="loadStream('yt')">YOUTUBE</button>
            <button class="btn btn-system" onclick="location.reload()">REBOOT SYSTEM</button>
        </div>

        <div id="playerContainer" class="player-box">
            <iframe id="player" allowfullscreen allow="autoplay; fullscreen"></iframe>
        </div>

        <div id="chatContainer" class="chat-box">
            <iframe id="chat" allowfullscreen></iframe>
        </div>
    </div>
</div>

<script>
function startSystem(){
    updateTime();
    setInterval(updateTime,1000);
}

function updateTime(){
    const clockEl = document.getElementById('clock');
    const dateEl = document.getElementById('date');
    const now = new Date();
    if(clockEl) clockEl.innerText = now.toLocaleTimeString('pt-BR');
    if(dateEl) dateEl.innerText = now.toLocaleDateString('pt-BR');
}

function loadStream(type){
    const linkInput = document.getElementById('linkInput');
    const player = document.getElementById('player');
    const chat = document.getElementById('chat');
    const playerContainer = document.getElementById('playerContainer');
    const chatContainer = document.getElementById('chatContainer');
    
    let val = linkInput.value.trim();
    if(!val) return;

    const host = window.location.hostname || "localhost";

    if(type === "twitch"){
        // VOLTA AO LAYOUT NORMAL (VÍDEO + CHAT)
        playerContainer.classList.remove('full-width');
        chatContainer.classList.remove('hidden');

        if(val.includes("twitch.tv")) val = val.split("twitch.tv/")[1];
        player.src = `https://player.twitch.tv/?channel=${val}&parent=${host}`;
        chat.src = `https://www.twitch.tv/embed/${val}/chat?parent=${host}&darkpopout`;
    } else {
        // LAYOUT YOUTUBE (VÍDEO TELA CHEIA, SEM CHAT)
        playerContainer.classList.add('full-width');
        chatContainer.classList.add('hidden');

        let videoId = val;
        if(val.includes("v=")) videoId = val.split("v=")[1].split("&")[0];
        else if(val.includes("youtu.be/")) videoId = val.split("youtu.be/")[1].split("?")[0];
        else if(val.includes("/live/")) videoId = val.split("/live/")[1].split("?")[0];
        else if(val.includes("/embed/")) videoId = val.split("/embed/")[1].split("?")[0];

        player.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
        chat.src = "about:blank"; 
    }
}
</script>

</body>
</html>
