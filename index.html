<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SANTOS & VIEIRA | NEURAL COMMAND v4.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=JetBrains+Mono:wght@300&display=swap" rel="stylesheet">
    <style>
        :root { 
            --main-color: #ff0000; 
            --glow-color: #ff0000; 
            --bg-panel: rgba(2, 2, 2, 0.95);
            --accent-kick: #53fc18;
        }

        *{box-sizing:border-box; margin: 0; padding: 0; cursor: crosshair;}
        
        body {
            width:100%; height:100vh; background:#000; 
            font-family:'Orbitron', sans-serif; overflow:hidden; color: #fff;
            background-image: radial-gradient(circle at center, #110000 0%, #000 100%);
        }

        /* Efeito de Scanner de Tela */
        body::after {
            content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 2px;
            background: rgba(255, 0, 0, 0.2); opacity: 0.5;
            animation: scan 4s linear infinite; z-index: 100; pointer-events: none;
        }
        @keyframes scan { 0% { top: 0; } 100% { top: 100%; } }

        /* Grade de Fundo */
        .grid-overlay {
            position: fixed; inset: 0;
            background-image: linear-gradient(var(--main-color) 1px, transparent 1px), linear-gradient(90deg, var(--main-color) 1px, transparent 1px);
            background-size: 40px 40px; opacity: 0.03; pointer-events: none;
        }

        .core-panel {
            width:98%; height:96%; margin:1% auto; 
            border:1px solid var(--main-color); position: relative;
            box-shadow: inset 0 0 30px rgba(255, 0, 0, 0.2), 0 0 15px rgba(255, 0, 0, 0.3);
            background: var(--bg-panel); display:flex; flex-direction:column;
            clip-path: polygon(0 0, 97% 0, 100% 3%, 100% 100%, 3% 100%, 0 97%);
        }

        .core-header {
            display:flex; justify-content:space-between; align-items:center; 
            padding:10px 25px; border-bottom:1px solid var(--main-color);
            background: linear-gradient(90deg, rgba(255,0,0,0.1) 0%, transparent 100%);
        }

        .status-blink {
            width: 8px; height: 8px; background: var(--main-color);
            border-radius: 50%; display: inline-block; margin-right: 10px;
            animation: blink 1s infinite;
        }
        @keyframes blink { 0%, 100% { opacity: 1; box-shadow: 0 0 10px var(--main-color); } 50% { opacity: 0.3; } }

        .core-body { flex:1; display:flex; gap:10px; padding:10px; overflow: hidden; }
        
        /* Sidebar Estilo Terminal */
        .sidebar {
            width:280px; display:flex; flex-direction:column; gap:10px; 
            background: rgba(10, 0, 0, 0.8); padding: 15px; 
            border-right: 1px solid rgba(255,0,0,0.3);
        }

        .terminal-text { font-family: 'JetBrains Mono', monospace; font-size: 9px; color: var(--main-color); text-transform: uppercase; margin-bottom: 5px; letter-spacing: 1px; }

        input, select {
            background: rgba(255,0,0,0.05); border: 1px solid rgba(255,0,0,0.4); 
            color: #fff; padding: 10px; font-family: 'Orbitron'; font-size: 10px; 
            outline: none; width: 100%; transition: 0.3s;
        }
        input:focus { border-color: var(--main-color); box-shadow: 0 0 10px rgba(255,0,0,0.3); background: rgba(255,0,0,0.1); }

        .btn {
            padding:10px; background: transparent; color: var(--main-color); 
            border: 1px solid var(--main-color); cursor:pointer; font-family: 'Orbitron';
            font-size: 9px; font-weight: bold; position: relative; overflow: hidden;
            transition: 0.3s;
        }
        .btn::before {
            content: ""; position: absolute; top: 0; left: -100%; width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: 0.5s;
        }
        .btn:hover::before { left: 100%; }
        .btn:hover { background: var(--main-color); color: #000; box-shadow: 0 0 20px var(--main-color); }

        /* Abas Estilo Militar */
        .accordion-item { border-left: 2px solid rgba(255,0,0,0.3); margin-bottom: 8px; background: rgba(255,255,255,0.02); }
        .accordion-header {
            padding: 10px; cursor: pointer; font-size: 10px; font-weight: bold; 
            color: #ccc; border-bottom: 1px solid rgba(255,0,0,0.1);
            display: flex; justify-content: space-between;
        }
        .accordion-header:hover { color: var(--main-color); background: rgba(255,0,0,0.05); }
        .accordion-content { display: none; padding: 5px; }
        .accordion-content.active { display: block; animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

        .fav-item {
            display:flex; align-items:center; justify-content:space-between; 
            padding:8px; margin-bottom: 2px; background: rgba(0,0,0,0.4);
            font-size: 9px; border: 1px solid transparent; transition: 0.2s;
        }
        .fav-item:hover { border-color: var(--main-color); background: rgba(255,0,0,0.1); transform: translateX(5px); }

        /* Grid de Vídeo - Nível Hard */
        .main-view { flex: 1; display: grid; gap: 15px; overflow-y: auto; align-content: start; padding-right: 5px; }
        
        .player-box { 
            border: 1px solid rgba(255,0,0,0.5); background: #000; 
            position: relative; aspect-ratio: 16 / 9;
            transition: 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
        }
        .player-box:hover { border-color: var(--main-color); box-shadow: 0 0 20px rgba(255,0,0,0.2); scale: 1.01; }

        .player-header {
            position: absolute; top: 0; width: 100%; height: 25px;
            background: linear-gradient(180deg, rgba(0,0,0,0.8) 0%, transparent 100%);
            z-index: 10; display: flex; justify-content: space-between; align-items: center; padding: 0 10px;
        }

        .btn-close-slot {
            background: none; border: 1px solid var(--main-color); color: var(--main-color);
            font-size: 10px; width: 18px; height: 18px; cursor: pointer;
        }
        .btn-close-slot:hover { background: var(--main-color); color: #000; }

        iframe { width: 100%; height: 100%; border: none; filter: contrast(1.1) brightness(1.1); }

        /* Relógio e Infos */
        #clock { font-size: 24px; color: var(--main-color); font-weight: bold; letter-spacing: 2px; }
        .sys-info { font-size: 8px; color: rgba(255,255,255,0.4); text-align: right; margin-top: 2px; }

        ::-webkit-scrollbar { width: 3px; }
        ::-webkit-scrollbar-thumb { background: var(--main-color); }
    </style>
</head>
<body onload="initSystem()">

<div class="grid-overlay"></div>

<div class="core-panel">
    <div class="core-header">
        <div>
            <div style="font-size: 22px; font-weight: 700; letter-spacing: 4px; color: var(--main-color); text-shadow: 0 0 10px var(--main-color);">
                <span class="status-blink"></span>SANTOS & VIEIRA
            </div>
            <div class="terminal-text" style="margin-top: -5px; opacity: 0.7;">> NEURAL INTERFACE LOADED_</div>
        </div>
        <div>
            <div id="clock">00:00:00</div>
            <div class="sys-info">CPU: 12% | MEM: 4.2GB | ENCRYPTED: YES</div>
        </div>
    </div>
    
    <div class="core-body">
        <div class="sidebar">
            <div class="terminal-text">[ QUICK_DEPLOY ]</div>
            <input id="quickInput" placeholder="ID_CANAL_HEX">
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:5px; margin-bottom: 10px;">
                <button class="btn" onclick="addLive(document.getElementById('quickInput').value, 'twitch')">TWITCH.core</button>
                <button class="btn" onclick="addLive(document.getElementById('quickInput').value, 'kick')">KICK.core</button>
            </div>

            <div class="accordion-item">
                <div class="accordion-header" onclick="toggleAcc('acc-save')">DATABASE_MANAGEMENT <span>[+]</span></div>
                <div id="acc-save" class="accordion-content">
                    <input id="saveInput" placeholder="ALIAS_NAME">
                    <select id="favCat">
                        <option value="SÓ NA CONVERSA">JUST_CHATTING</option>
                        <option value="GAMES">OPERATIONS_GAMES</option>
                        <option value="ESPORTES">SPORTS_STREAM</option>
                    </select>
                    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:5px;">
                        <button class="btn" onclick="saveFav('twitch')">+ TWITCH</button>
                        <button class="btn" onclick="saveFav('kick')">+ KICK</button>
                    </div>
                </div>
            </div>

            <div class="accordion-item">
                <div class="accordion-header" onclick="toggleAcc('acc-conversa')">JUST_CHATTING <span>[V]</span></div>
                <div id="acc-conversa" class="accordion-content active"><div id="cat-CONVERSA"></div></div>
            </div>

            <div class="accordion-item">
                <div class="accordion-header" onclick="toggleAcc('acc-games')">GAMES_OPERATIONS <span>[V]</span></div>
                <div id="acc-games" class="accordion-content active"><div id="cat-GAMES"></div></div>
            </div>

            <div class="accordion-item">
                <div class="accordion-header" onclick="toggleAcc('acc-esportes')">SPORTS_INTEL <span>[V]</span></div>
                <div id="acc-esportes" class="accordion-content"><div id="cat-ESPORTES"></div></div>
            </div>
            
            <button class="btn" style="margin-top:auto; font-size:8px; border-style: double; opacity: 0.5;" onclick="location.reload()">HARD_RESET</button>
        </div>

        <div id="mainView" class="main-view">
            </div>
    </div>
</div>

<script>
    let defaultFavs = [
        { name: "Jon Vlogs", id: "jonvlogs", type: "twitch", cat: "SÓ NA CONVERSA" },
        { name: "LOUD Coringa", id: "loud_coringa", type: "twitch", cat: "GAMES" },
        { name: "KROSS", id: "kross", type: "kick", cat: "GAMES" }
    ];

    let favorites = JSON.parse(localStorage.getItem('sv_favs_v202')) || defaultFavs;

    function initSystem(){
        renderFavs();
        setInterval(() => document.getElementById('clock').innerText = new Date().toLocaleTimeString('pt-BR'), 1000);
    }

    function toggleAcc(id) { document.getElementById(id).classList.toggle('active'); }

    function cleanID(val) {
        if(!val) return "";
        let id = val.trim();
        if(id.includes("twitch.tv/")) id = id.split("twitch.tv/")[1].split("?")[0];
        else if(id.includes("kick.com/")) id = id.split("kick.com/")[1].split("?")[0];
        return id;
    }

    function renderFavs(){
        ["CONVERSA", "GAMES", "ESPORTES"].forEach(c => document.getElementById(`cat-${c}`).innerHTML = "");
        favorites.forEach((fav, index) => {
            const list = document.getElementById(fav.cat === "SÓ NA CONVERSA" ? "cat-CONVERSA" : `cat-${fav.cat}`);
            if(list) {
                list.innerHTML += `
                <div class="fav-item" onclick="addLive('${fav.id}', '${fav.type}')">
                    <span>> ${fav.name.toUpperCase()} <small style="color:var(--main-color); opacity:0.5;">[${fav.type}]</small></span>
                    <button class="btn-del" style="background:none; border:none; color:var(--main-color); cursor:pointer;" onclick="event.stopPropagation(); deleteFav(${index})">[-X-]</button>
                </div>`;
            }
        });
    }

    function saveFav(type){
        const input = document.getElementById('saveInput');
        const id = cleanID(input.value);
        if(!id) return;
        favorites.push({ name: id.toUpperCase(), id, type, cat: document.getElementById('favCat').value });
        localStorage.setItem('sv_favs_v202', JSON.stringify(favorites));
        renderFavs();
        input.value = "";
    }

    function deleteFav(index){
        favorites.splice(index, 1);
        localStorage.setItem('sv_favs_v202', JSON.stringify(favorites));
        renderFavs();
    }

    function addLive(val, type) {
        const id = cleanID(val);
        if(!id) return;
        const mainView = document.getElementById('mainView');
        const host = window.location.hostname || "localhost";
        const slot = document.createElement('div');
        slot.className = 'player-box';
        
        let url = (type === 'twitch') 
            ? `https://player.twitch.tv/?channel=${id}&parent=${host}` 
            : `https://player.kick.com/${id}?muted=false`;

        slot.innerHTML = `
            <div class="player-header">
                <span style="font-size:8px; color:var(--main-color); font-weight:bold;">FEED_SIGNAL: ${id.toUpperCase()} [${type.toUpperCase()}]</span>
                <button class="btn-close-slot" onclick="this.parentElement.parentElement.remove(); checkGrid();">X</button>
            </div>
            <iframe src="${url}" allowfullscreen allow="autoplay"></iframe>
        `;

        mainView.appendChild(slot);
        checkGrid();
        document.getElementById('quickInput').value = "";
    }

    function checkGrid() {
        const mv = document.getElementById('mainView');
        const total = mv.children.length;
        if(total > 4) mv.style.gridTemplateColumns = "repeat(auto-fit, minmax(30%, 1fr))";
        else if (total > 1) mv.style.gridTemplateColumns = "repeat(auto-fit, minmax(45%, 1fr))";
        else mv.style.gridTemplateColumns = "1fr";
    }
</script>
</body>
</html>
